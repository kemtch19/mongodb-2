db.createCollection("practicaUpdate");
//documento 1
db.practicaUpdate.insertOne({
    nombre:"Daniel",
    apellido:"Zapata",
    correo:"daniel@example.com",
    ciudad:"Londres",
    pais:"Inglaterra",
    salario:2000,
    edad:23,
    altura:180,
    peso:120
});

//documento 2
db.practicaUpdate.insertOne({
    nombre: "Javier",
    apellido: "Hernández",
    correo: "javier@example.com",
    ciudad: "Madrid",
    pais: "Francia",
    salario: 24000,
    edad: 32,
    altura: 180,
    peso: 75
});

//documento 3
db.practicaUpdate.insertOne({
    nombre: "Ana",
    apellido: "Martínez",
    correo: "ana@example.com",
    ciudad: "Berlín",
    pais: "Alemania",
    salario: 200200,
    edad: 39,
    altura: 165,
    peso: 60
});

//documento 4
db.practicaUpdate.insertOne({
    nombre: "Luca",
    apellido: "Rossi",
    correo: "luca@example.com",
    ciudad: "Toronto",
    pais: "Canada",
    salario: 287600,
    edad: 35,
    altura: 175,
    peso: 70
});

//documento 5
db.practicaUpdate.insertOne({
    nombre: "Sofía",
    apellido: "García",
    correo: "sofia@example.com",
    ciudad: "Barcelona",
    pais: "España",
    salario: 2300,
    edad: 30,
    altura: 170,
    peso: 65
});

//documento 6
db.practicaUpdate.insertOne({
    nombre: "Michael",
    apellido: "Johnson",
    correo: "michael@example.com",
    ciudad: "Nueva York",
    pais: "Estados Unidos",
    salario: 2800,
    edad: 33,
    altura: 185,
    peso: 80
});

//documento 7
db.practicaUpdate.insertOne({
    nombre: "Marie",
    apellido: "Dupont",
    correo: "marie@example.com",
    ciudad: "París",
    pais: "Francia",
    salario: 3000,
    edad: 29,
    altura: 168,
    peso: 63
});

//documento 8
db.practicaUpdate.insertOne({
    nombre: "William",
    apellido: "Smith",
    correo: "william@example.com",
    ciudad: "Londres",
    pais: "Reino Unido",
    salario: 2700,
    edad: 31,
    altura: 175,
    peso: 70
});

//documento 9
db.practicaUpdate.insertOne({
    nombre: "Thomas",
    apellido: "Jansen",
    correo: "thomas@example.com",
    ciudad: "Ámsterdam",
    pais: "Países Bajos",
    salario: 2400,
    edad: 30,
    altura: 180,
    peso: 75
});

//documento 10
db.practicaUpdate.insertOne({
    nombre: "Elena",
    apellido: "González",
    correo: "elena@example.com",
    ciudad: "Madrid",
    pais: "España",
    salario: 2600,
    edad: 33,
    altura: 170,
    peso: 68
});

//documento 11
db.practicaUpdate.insertOne({
    nombre: "Camilo",
    apellido: "Pérez",
    correo: "cami@example.com",
    ciudad: "Medellín",
    pais: "Colombia",
    salario: 26009,
    edad: 33,
    altura: 170,
    peso: 68
});

//documento 12
db.practicaUpdate.insertOne({
    nombre: "Daniela",
    apellido: "Marquez",
    correo: "dani@example.com",
    ciudad: "Roma",
    pais: "Italia",
    salario: 26009,
    edad: 20,
    altura: 170,
    peso: 68
});

//documento 13
db.practicaUpdate.insertOne({
    nombre: "Yeison",
    apellido: "Jimenez",
    correo: "",
    ciudad: "Roma",
    pais: "Italia",
    salario: 26009,
    edad: 20,
    altura: 170,
    peso: 68
});

//documento 14
db.practicaUpdate.insertOne({
    nombre: "Yeison",
    apellido: "Jimenez",
    correo: "",
    ciudad: "Río de Janeiro",
    pais: "Brasil",
    salario: 43092,
    edad: 30,
    altura: 160,
    peso: 145
});

//documento 15
db.practicaUpdate.insertOne({
    nombre: "Daniel",
    apellido: "Trujillo",
    correo: "dan@gmail.com",
    ciudad: "Santiago de Chile",
    pais: "Chile",
    salario: 43092,
    edad: 20,
    altura: 160,
    peso: 145
});

//documento 16
db.practicaUpdate.insertOne({
    nombre: "Mohamet",
    apellido: "Allut",
    correo: "moh@gmail.com",
    ciudad: "Nueva Delhi",
    pais: "India",    
    edad: 20,
    altura: 160,
    peso: 145
});

//documento 17
db.practicaUpdate.insertOne({
    nombre: "Camel",
    apellido: "Suc",
    correo: "moh@gmail.com",
    ciudad: "Nueva Delhi",
    pais: "India",    
    edad: 22,
    altura: 160,
    peso: 145
});

//documento 18
db.practicaUpdate.insertOne({
    nombre: "Dream",
    apellido: "Allut",
    correo: "moh@gmail.com",
    ciudad: "Copacabana",
    pais: "Colombia",    
    edad: 22,
    altura: 160,
    peso: 145
});

//documento 19
db.practicaUpdate.insertOne({
    nombre: "Dream",
    apellido: "Allut",
    correo: "moh@gmail.com",
    ciudad: "Copacabana",
    pais: "Colombia", 
    salario:1900,   
    edad: 22,
    altura: 160,
    peso: 145
});

//documento 20
db.practicaUpdate.insertOne({
    nombre: "Damian",
    apellido: "Suc",
    correo: "danipo@gmail.com",
    ciudad: "Nueva Delhi",
    pais: "India",    
    edad: 22,
    altura: 160,
    peso: 145
});


//documento 20
db.practicaUpdate.insertOne({
    nombre: "Complete",
    apellido: "Conde",
    correo: "Cm@gmail.com",
    ciudad: "Nueva Delhi",
    pais: "India",    
    edad: 22,
    altura: 181,
    peso: 181
});

//documento 21
db.practicaUpdate.insertOne({
    nombre: "Dan",
    apellido: "pre",
    correo: "com@gmail.com",
    ciudad: "Nueva Delhi",
    pais: "India",    
    edad: 22,
    altura: 181,
    peso: 181
});

//documento 22
db.practicaUpdate.insertOne({
    nombre: "yei",
    apellido: "yeick",
    correo: "lu@example.com",
    ciudad: "Toronto",
    pais: "Canada",
    salario: 287600,
    edad: 35,
    altura: 159,
    peso: 70
});

//documento 23
db.practicaUpdate.insertOne({
    nombre: "John",
    apellido: "Doe",
    correo: "lu@example.com",
    ciudad: "pasto",
    pais: "Colombia",
    salario: 287600,
    edad: 22,
    altura: 122,
    peso: 70
});

//documento 24
db.practicaUpdate.insertOne({
    nombre: "Camila",
    apellido: "Dem",
    ciudad: "pasto",
    pais: "Colombia",
    salario: 287600,
    edad: 22,
    altura: 122,
    peso: 70
});

//documento 25
db.practicaUpdate.insertOne({
    nombre: "Camila",
    apellido: "Condensa",
    ciudad: "Tokyo",
    pais: "Japón",
    salario: 287600,
    edad: 22,
    altura: 122,
    peso: 70
});

//documento 25
db.practicaUpdate.insertOne({
    nombre: "Cristian",
    apellido: "Aguirre",
    ciudad: "Tamaulipas",
    pais: "México",
    salario: 287600,
    edad: 16,
    altura: 122,
    peso: 70
});

//documento 26
db.practicaUpdate.insertOne({
    nombre: "Guillermo",
    apellido: "Tabares",
    ciudad: "Tamaulipas",
    pais: "México",
    salario: 0,
    edad: 16,
    altura: 122,
    peso: 70
});

//documento 26
db.practicaUpdate.insertOne({
    nombre: "Fernando",
    apellido: "Deltoro",
    ciudad: "New York",
    pais: "Estados Unidos",
    salario: 5001,
    edad: 16,
    altura: 122,
    peso: 70
});

//documento 27
db.practicaUpdate.insertOne({
    nombre: "Danilo",
    apellido: "Campusano",
    ciudad: "Filipinas",
    pais: "Europa",
    correo: "lu@spam.com",
    salario: 5001,
    edad: 16,
    altura: 122,
    peso: 70
});

//documento 28
db.practicaUpdate.insertOne({
    nombre: "Edilma",
    apellido: "Socorro",
    correo: "edi@example.com",
    ciudad: "Bello",
    pais: "Colombia",
    salario: 24000,
    edad: 62,
    altura: 180,
    peso: 75
});

//documento 29
db.practicaUpdate.insertOne({
    nombre: "juan",
    apellido: "Gónzales",
    correo: "juan@example.com",
    ciudad: "Bello",
    pais: "Colombia",
    salario: 2000,
    edad: 32,
    altura: 181,
    peso: 59
});

//documento 30
db.practicaUpdate.insertOne({
    nombre: "Camilo",
    apellido: "Mujica",
    correo: "muji@example.com",
    ciudad: "shangai",
    pais: "pekin",
    salario: 2000,
    edad: 71,
    altura: 181,
    peso: 59
});

//documento 30
db.practicaUpdate.insertOne({
    nombre: "Maicol",
    apellido: "Agudelo",
    correo: "kemtch@example.com",
    ciudad: "Masachuscets",
    pais: "Canadá",
    salario: 2000,
    edad: 71,
    altura: 181,
    peso: 59
});

//documento 30
db.practicaUpdate.insertOne({
    nombre: "Chanchito",
    apellido: "Feliz",
    correo: "Chanchito.feliz@example.com",
    ciudad: "Colorado",
    pais: "Estados Unidos",
    salario: 32000,
    edad: 71,
    altura: 200,
    peso: 59
});

//Operaciones de eliminacion

//1. Eliminar todos los usuarios que tienen un salario menor que 2000 dólares.

db.practicaUpdate.deleteMany({
    salario:{$lt:2000}
});


//2. Eliminar usuarios que tienen una edad menor que 25 años.

db.practicaUpdate.deleteMany({
    edad:{$lt:25}
});

//3. Borrar todos los usuarios que viven en "París".

db.practicaUpdate.deleteMany({
    ciudad:{$eq:"París"}
});

//4. Eliminar usuarios que tienen un peso superior a 180 libras.

db.practicaUpdate.deleteMany({
    peso:{$gt:180}
});

//5. Eliminar usuarios que tienen una altura inferior a 160 centímetros.

db.practicaUpdate.deleteMany({
    altura:{$lt:160}
});

//6. Eliminar todos los usuarios que tienen el nombre "John" y el apellido "Doe".

db.practicaUpdate.deleteMany({
    $and:[
        {nombre:{$eq:"John"}},
        {apellido:{$eq:"Doe"}}
    ]
});

//7. Borrar usuarios que tienen una dirección de correo electrónico específica, por ejemplo, "borrar@riwi.com".

db.practicaUpdate.deleteMany({
    correo:{$eq:"lu@example.com"}
});

//8. Eliminar usuarios que no tienen una dirección de correo electrónico registrada.

db.practicaUpdate.deleteMany({
    correo:{$exists:false}
});

//9. Eliminar usuarios que viven en "Tokyo".

db.practicaUpdate.deleteMany({
    ciudad:{$eq:"Tokyo"}
});

//10. Borrar todos los usuarios que son menores de 18 años.

db.practicaUpdate.deleteMany({
    edad:{$lt:18}
});

//11. Eliminar usuarios que tienen un salario igual a 0.

db.practicaUpdate.deleteMany({
    salario:{$eq:0}
});

//12. Borrar usuarios que viven en "New York" y tienen un salario superior a 5000 dólares.

db.practicaUpdate.deleteMany({
    $and:[
        {ciudad:{$eq:"New York"}},
        {salario:{$gt:5000}}
    ]
});

//Estar pendiente a preguntar al profesor porque no me funciona
//13. Eliminar usuarios que tienen una dirección de correo electrónico que contiene la palabra "spam".

db.practicaUpdate.find({
    correo:{$regex: /spam/i }
});

//14. Borrar usuarios que viven en "Bello" y tienen más de 50 años.

db.practicaUpdate.deleteMany({
    $and:[
        {ciudad:{$eq:"Bello"}},
        {edad:{$gt:50}}
    ]
});

//15. Eliminar todos los usuarios que tienen el apellido "González".

db.practicaUpdate.deleteMany({
    apellido:{$eq: "Gónzales"}
});

//16. Borrar usuarios que tienen una edad superior a 70 años.

db.practicaUpdate.deleteMany({
    edad:{$gt:70}
});

//17. Eliminar usuarios que tienen un país de residencia igual a "Canadá" y un salario inferior a 4000 dólares.

db.practicaUpdate.deleteMany({
    $and:[
        {pais:{$eq:"Canadá"}},
        {salario:{$lt:4000}}
    ]
});

//se practica utilizando syntaxis de javascript para hacer un experimento
//18. Borrar usuarios que tienen un salario entre 1000 y 2000 dólares.

let array=[1000,2000];

db.practicaUpdate.deleteMany({
    salario:{$in:array}
});

//19. Eliminar usuarios que tienen una edad igual a 30 años.

db.practicaUpdate.deleteMany({
    edad:{$eq:30}
});

//20. Borrar usuarios que tienen una altura superior a 190 centímetros.

db.practicaUpdate.deleteMany({
    altura:{$gt:190}
});

//practica para tomar el rango de salario entre 0 y 5002
db.practicaUpdate.find({
    $and:[
        {salario:{$gte:0}},
        {salario:{$lte:5002}}
    ]
});

//con el método .sort() nos ayuda a organizar la información con :1 es los números menores y con :-1 los números desde el mas alto hasta el mas bajo
//el metodo .limit() nos ayuda a que nos limite el número de documentos que nos va a devolver por ejemplo de esa consulta del find devuelvame los primeros 3 resultados y organizemelos de menor a mayor, pretty es para que se muestre de manera mas organizada
db.practicaUpdate.find({
    pais:"Colombia"
}).sort({
    edad:1
}).limit(3).pretty()

//combinamos la tecnología de base de datos Mongo con javascript
var consulta=db.practicaUpdate.find().forEach(user=>print(user.nombre+" "+user.apellido));

consulta;

//debemos de recordar que mongo es un lazy iterator lo que quiere decir es que nos va a devolver los elementos conforme los vayamos necesitando ya que si pedimos 1000 documentos nos va a devolver 20 y luego otros 20 y así para que no ocupe toda la memoria ram ahi el argumento de que sea flexible y rápido para grandes volumenes de datos

//proyecciones: son aquellas formas en las que podemos obtener los documentos de manera muy precisa, es decir, quiero que me muestre solamente el nombre y la edad de todos los 100 documentos que tengo, porque si nosotros realizamos las consultas lo que nos devolveran las condiciones que les pasemos serán todos los campos nombre, apellido, edad, altura, ciudad, etc. pero para eso están las proyecciones

//en cuanto a las consultas con find recordemos que el primer argumento {} definimos las condiciones que nos va a devolver la consulta si lo dejamos solo cojera todos los documentos sin una condición en especifico, pero el segundo argumento {} donde definiremos los atributos a mostrar por pantalla todo esto mediante true o false de si queremos que se muestre o false que no queremos que se muestre por pantalla
db.practicaUpdate.find(
    {
        edad:{$gte:50}
    },
    {
        _id:false,
        nombre:true,
        edad:true       
    }
);

//para actualizar utilizamos el método .update() el cuál se le pasan dos paramétros, el primero es el para abarcar todos los datos o la condición que deben de pasar primero para poder luego el segundo parámetro que le pasemos pueda cambiarse con el set que es la palabra reservada para modificar 

//hay que estar muy pendientes de la integridad de los datos porque cree un campo llamado name con el atributo camilo en vez de cambiar el campo nombre por el atributo camilo

//hay que recordar que el método update solamente actualiza un solo documento ya si queremos actualizar varios debemos de utilizar un 3 argumento. El cual llamamos multi:true, es decir, aceptame multiples documentos que cumplan la condición, pero se pueden reemplazar updateMany o updateOne

db.practicaUpdate.update(
    {
        _id: ObjectId("65f4c52a88ba14e583a1a478")
    },
    {
        $set:{ //establecer
            nombre:"camilo"
        }
    },
    {
        multi:true
    }
);

//Buscamos el ID
db.practicaUpdate.findOne({
    _id: ObjectId("65f4c52a88ba14e583a1a478")
});

//para poder quitar un valor que nosotros no querramos tenemos la palabra reservada $unset para quitar ese valor del documento

db.practicaUpdate.update(
    {
        _id: ObjectId("65f4c52a88ba14e583a1a478")
    },
    {
        $unset:{ //quitar
            name:true
        }
    }
);

db.practicaUpdate.updateOne(
    {
        nombre:"camilo"
    },
    {
        $set:{
            estado:"activo"
        }
    }
);

db.practicaUpdate.find({
    nombre:"camilo"
})

//para poder insertar varios documentos de un solo debemos de utilizar una lista de documentos que se crea con [] y dentro de este los documentos seguidos con , con las llaves {}
db.practicaUpdate.insertMany(
    [{
        nombre:"Yan",
        apellido:"Agudelo",
        edad:20,
        altura:32
    },
    {
        nombre:"Patricia",
        apellido:"Rojas",
        edad:44,
        altura:160
    }]
);

//para incrementar valores cambiamos la palabra reservada $set por $inc o también le podemos quitar 2 edad:-2
db.practicaUpdate.updateMany(
    {},
    {
        $inc:{
            edad:1
        }
    }
);

// Nosotros también podemos eliminar mediante el método remove, con este así borra todos los documentos
// db.practicaUpdate.remove({})

//También tenemos el comando show collections; para ver todas las colecciones (las tablas), para poder verlas todas, db (la base de datos en la que esta parado), db.user.drop()->este nos permite borrar la colección de los datos llamada user, para eliminar la base de datos colocamos db.dropDatabase() ; show databases;

//también tenemos el dot notation el cual nos ayuda a llegar a un documento en especifico si tenemos varios documentos envebidos dentro de otro direccion.localicacion.latencia:

db.practicaUpdate.find(
    {
        apellido:"Hernández"
    }
)

//con el elemento $elemMatch nos ayudara a buscar sobre documentos {} que esten dentro de un listado []

db.practicaUpdate.find(
    {
        direccion:{
            $elemMatch:{
                latitud:240
            }
        }
    }
);

//si nosotros queremos añadir un nuevo elemento al final de una lista debemos de poner el elemento $push 
db.practicaUpdate.updateOne(
    {
        nombre:"Maicol",
        latitud:{$exists:true},
        longitud:{$exists:true}
    },
    {
        $push:{
            direccion:{
                latitud:125,
                longitud:321
            }
        }
    }
);

//si nosotros queremos añadir un valor en especifico a una lista dentro de un array utilizamos la notación dot notation y en base a eso le indicamos la posición después de la que queremos agregar sobre la lista que tenemos [] 0,1,2,3, etc. por ejemplo

db.user.updateOne(
    {
        nombre:"Daniel"
    },
    {
        $push:{
            "comments.3.tags": "Tutor"
        }
    }
);

//hay que tener en cuenta que si vamos a modificar algo con una condición y no sabemos exactamente el índice de la lista lo hacemos con el comodín de $

db.practicaUpdate.updateOne(
    {
        nombre:"camilo",
        edad:32
    },
    {
        $set:{
            edad:44
        }
    }
);

db.user.updateOne(
    {
        nombre:"Daniel",
        'comments.like':false
    },
    {
        $push:{
            "comments.$.tags": "Tutor"
        }
    }
);